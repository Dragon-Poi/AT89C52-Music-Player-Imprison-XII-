C51 COMPILER V9.54   MAIN                                                                  09/03/2025 15:42:05 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\program\Keil5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listing
                    -s\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "Delay.h"
   3          #include "Timer0.h"
   4          
   5          sbit Buzzer = P2^5;
   6          
   7          #define SPEED   300
   8          
   9          #define P 0
  10          #define C3  1
  11          #define C3_ 2
  12          #define D3  3
  13          #define D3_ 4
  14          #define E3  5
  15          #define F3  6
  16          #define F3_ 7
  17          #define G3  8
  18          #define G3_ 9
  19          #define A3  10
  20          #define A3_ 11
  21          #define B3  12
  22          #define C4  13
  23          #define C4_ 14
  24          #define D4  15
  25          #define D4_ 16
  26          #define E4  17
  27          #define F4  18
  28          #define F4_ 19
  29          #define G4  20
  30          #define G4_ 21
  31          #define A4  22
  32          #define A4_ 23
  33          #define B4  24
  34          #define C5  25
  35          #define C5_ 26
  36          #define D5  27
  37          #define D5_ 28
  38          #define E5  29
  39          #define F5  30
  40          #define F5_ 31
  41          #define G5  32
  42          #define G5_ 33
  43          #define A5  34
  44          #define A5_ 35
  45          #define B5  36
  46          
  47          unsigned int code FreqTable[] = {0,63628,63731,63835,63928,64021,64103,64185,64260,64331,64400,
  48            64463,64528,64580,64633,64684,64732,64777,64820,64860,64898,64934,64968,65000,
  49            65030,65058,65085,65110,65134,65157,65178,65198,65217,65235,65252,65268,65283,
  50          };
  51          
  52          /*
  53          16分音符 1
  54          8分音符  2
C51 COMPILER V9.54   MAIN                                                                  09/03/2025 15:42:05 PAGE 2   

  55          4分音符  4
  56          2分音符  8
  57          */
  58          
  59          unsigned int code Music[] = {
  60            C4,2,
  61            
  62            G4,6,
  63            D4,10,
  64            E4,2,
  65            
  66            D4,2,
  67            C4,2,
  68            C4,8,
  69            P,2,
  70            C4,2,
  71          
  72            G4,6,
  73            D4,10,
  74            E4,2,
  75            
  76            D4,2,
  77            C4,2,
  78            E4,8,
  79            P,2,
  80            E4,2,
  81            
  82            C5,6,
  83            B4,6,
  84            A4,6,
  85            
  86            G4,2,
  87            F4,2,
  88            E4,8,
  89            P,2,
  90            E4,2,
  91            
  92            D4,12,
  93            P,1,
  94            D4,2,
  95            C4,2,
  96            
  97            B3,12,
  98            P,2,
  99            C4,2,
 100            
 101            G4,6,
 102            D4,10,
 103            E4,2,
 104            
 105            D4,2,
 106            C4,2,
 107            C4,8,
 108            P,2,
 109            C4,2,
 110            
 111            G4,6,
 112            D4,10,
 113            E4,2,
 114            
 115            D4,2,
 116            C4,2,
C51 COMPILER V9.54   MAIN                                                                  09/03/2025 15:42:05 PAGE 3   

 117            E4,8,
 118            P,2,
 119            E4,2,
 120            
 121            C5,6,
 122            B4,6,
 123            A4,6,
 124            
 125            G4,2,
 126            F4,2,
 127            E4,8,
 128            P,2,
 129            E4,2,
 130            
 131            D4,12,
 132            P,2,
 133            E4,2,
 134            
 135            F4,6,
 136            G4,6,
 137            C4,6,
 138            
 139            B4,16,
 140            A4,2,
 141            
 142            G4,12,
 143            E4,2,
 144            D4,2,
 145            C4,2,
 146            
 147            F4,6,
 148            E4,6,
 149            B3,6,
 150            
 151            C4,12,
 152            C4,6,
 153            
 154            B4,14,
 155            B4,2,
 156            C5,2,
 157            
 158            G4,12,
 159            E4,2,
 160            D4,2,
 161            C4,2,
 162            
 163            F4,6,
 164            E4,6,
 165            F4,6,
 166            
 167            G4,8,
 168            P,1,
 169            G4,2,
 170            D5,2,
 171            B4,2,
 172            
 173            C5,14,
 174            P,1,
 175            B4,2,
 176          
 177            C5,14,
 178            P,1,
C51 COMPILER V9.54   MAIN                                                                  09/03/2025 15:42:05 PAGE 4   

 179            B4,2,
 180          
 181            C5,14,
 182            P,1,
 183            D5,2,
 184            
 185            E5,14,
 186            D5,2,
 187            C5,6,
 188            
 189            C5,10,
 190            B4,2,
 191            G4,6,
 192            
 193            G4,12,
 194            E4,2,
 195            
 196            F4,2,
 197            F4,2,
 198            E4,2,
 199            F4,2,
 200            F4,2,
 201            E4,2,
 202            F4,2,
 203            F4,2,
 204            E4,2,
 205            
 206            G4,8,
 207            P,1,
 208            G4,2,
 209            D5,4,
 210            B4,2,
 211            
 212            C5,14,
 213            P,1,
 214            B4,2,
 215            
 216            C5,14,
 217            P,1,
 218            B4,2,
 219            
 220            C5,14,
 221            P,1,
 222            D5,2,
 223            
 224            E5,10,
 225            F5,2,
 226            E5,4,
 227            D5,2,
 228            
 229            C5,4,
 230            C5,6,
 231            B4,2,
 232            C5,4,
 233            B4,2,
 234            
 235            C5,4,
 236            B4,2,
 237            G4,8,
 238            P,1,
 239            E4,2,
 240            
C51 COMPILER V9.54   MAIN                                                                  09/03/2025 15:42:05 PAGE 5   

 241            F4,4,
 242            E4,2,
 243            F4,4,
 244            E4,2,
 245            D4,4,
 246            C4,2,
 247            
 248            C4,16,
 249            0xFF
 250          };
 251            
 252          unsigned int FreqSelect,MusicSelect;
 253          
 254          void main(){
 255   1        Timer0Init();
 256   1        while(1){
 257   2          if(Music[MusicSelect]!=0xFF){
 258   3            FreqSelect = Music[MusicSelect];
 259   3            MusicSelect++;
 260   3            Delay(SPEED/4*Music[MusicSelect]);
 261   3            MusicSelect++;
 262   3            TR0 = 0;
 263   3            Delay(5);
 264   3            TR0 = 1;
 265   3          }
 266   2          else{
 267   3            TR0 = 0;
 268   3            while(1);
 269   3          }
 270   2        }
 271   1      }
 272          
 273          void Timer0_Rountine() interrupt 1{
 274   1        if(FreqTable[FreqSelect]){
 275   2          TL0 = FreqTable[FreqSelect]%256;    //设置定时初值
 276   2          TH0 = FreqTable[FreqSelect]/256;    //设置定时初值
 277   2          Buzzer =! Buzzer;
 278   2        }
 279   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    183    ----
   CONSTANT SIZE    =    672    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
